#include "@NEW_PROJECT_NAME@.hpp"

int main(int argc, char **argv) {
        try {
        DDSInterface dds_interface = DDSInterface::CreateDDSInterface(0, 0);
        DDSPublisher dds_publisher = DDSPublisher::CreateDDSPublisher(dds_interface, "example_message.xml", "topic_HelloWorld", "HelloWorld", "topics_lib");
        DDSMessage message = dds_publisher.create_message();
        message.set_string("msg", "hello");
        message.set_dynamic_value("short_member", (short)1);

        while (true) {
            printf("Sending the following message\n");
            message.print();

            dds_publisher.publish(message);

            std::cout << "Sleeping for 4s.." << std::endl;
            rti::util::sleep(dds::core::Duration(4));
        }
    }
    catch (DDSException& e) {
        std::cout << e.what() << std::endl;
    }
    catch (dds::core::Error e) {
        std::cout << e.what() << std::endl;
    }
}
